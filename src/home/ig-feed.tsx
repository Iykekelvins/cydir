'use client';

import { useEffect, useState } from 'react';
import { IgFeedSectionSliceDefaultPrimary } from '../../prismicio-types';
import { KeyTextField } from '@prismicio/client';

import Image from 'next/image';
import Words from '@/animations/words';
import Paragraph from '@/animations/paragraph';
import Scale from '@/animations/scale';
import Link from 'next/link';
import Button from '@/components/button';

export default function IgFeed({
	igFeedSection,
}: {
	igFeedSection: IgFeedSectionSliceDefaultPrimary;
}) {
	return (
		<section className='py-[max(5rem,40px)] relative z-12'>
			<div className='px-gutter'>
				<div
					className='flex flex-col items-center justify-center 
        text-center'>
					<Scale
						as='svg'
						width='32'
						height='32'
						viewBox='0 0 32 32'
						fill='none'
						xmlns='http://www.w3.org/2000/svg'>
						<rect
							x='0.5'
							y='0.5'
							width='30.9994'
							height='31'
							rx='15.4997'
							stroke='#192A4D'
						/>
						<g clipPath='url(#clip0_404_1903)'>
							<path
								d='M23.9988 15.8988L23.959 15.9L23.9988 15.8933C23.9988 15.848 23.9976 15.8033 23.9957 15.7592C23.9945 15.7206 23.9927 15.682 23.9914 15.644L23.9902 15.6207C23.9884 15.5742 23.9853 15.5277 23.9822 15.4817C23.9761 15.3831 23.9688 15.2931 23.9602 15.2067C23.9565 15.17 23.9528 15.1339 23.9486 15.0983L23.9467 15.083C23.9443 15.0598 23.9418 15.0371 23.9388 15.0169L23.9241 14.8999C23.9192 14.8662 23.9143 14.8319 23.9094 14.7976C23.9038 14.7603 23.8977 14.7235 23.8916 14.6868L23.861 14.5122C23.8536 14.4749 23.8469 14.4369 23.8371 14.391C23.8297 14.3554 23.8224 14.3199 23.8144 14.2862C23.8065 14.2489 23.7979 14.2121 23.7893 14.176L23.7869 14.165C23.7814 14.1399 23.7758 14.1148 23.7691 14.0896C23.7636 14.0658 23.7575 14.0425 23.752 14.0223C23.7489 14.0082 23.7452 13.9941 23.7422 13.9837C23.7348 13.9543 23.7269 13.9255 23.7195 13.898C23.7134 13.8753 23.7073 13.852 23.7005 13.8281L23.6319 13.5985C23.6209 13.5623 23.6093 13.5256 23.5976 13.4913C23.5878 13.4607 23.5774 13.4294 23.567 13.4C23.556 13.3676 23.545 13.3351 23.5339 13.3039C23.5235 13.2745 23.5125 13.2451 23.5021 13.2181C23.4904 13.1857 23.4782 13.1532 23.4635 13.1159C23.4439 13.065 23.4237 13.0142 23.4029 12.9646L23.352 12.8427C23.341 12.8182 23.3306 12.7937 23.319 12.7668L23.3141 12.7558C23.3067 12.7386 23.2994 12.7221 23.2914 12.7055L23.2559 12.629C23.2369 12.5886 23.2179 12.5481 23.1989 12.5096C23.085 12.2744 22.9576 12.0416 22.8204 11.8193C21.3739 9.46327 18.8622 8.03629 16.1044 8.00138C16.0352 7.99954 15.9636 7.99954 15.898 8.00138C13.131 8.03567 10.6163 9.46817 9.17037 11.8328C8.4232 13.054 8.01899 14.4596 8.00122 15.8963C8 15.9306 8 15.9662 8 16.0005C8 16.0348 8 16.0703 8.00122 16.1033C8.0196 17.5806 8.44402 19.0192 9.22978 20.2637C10.6843 22.5695 13.177 23.9665 15.8962 23.9995C15.9305 24.0008 15.9654 24.0008 16.0003 24.0008C16.0352 24.0008 16.0701 24.0008 16.1032 23.9995C18.8537 23.9652 21.361 22.5456 22.81 20.2018C22.8584 20.1234 22.9062 20.0426 22.9558 19.9562C23.0017 19.8754 23.0391 19.8086 23.0722 19.7437L23.0771 19.7345C23.1089 19.6745 23.1414 19.6108 23.1818 19.5281C23.1995 19.492 23.2173 19.4552 23.2381 19.4118L23.2485 19.3897C23.2675 19.3493 23.2859 19.3089 23.303 19.2697C23.3214 19.2292 23.3392 19.1882 23.3557 19.149C23.3729 19.1098 23.3894 19.0712 23.409 19.0229C23.4237 18.9873 23.4384 18.9506 23.4513 18.9157C23.4868 18.8263 23.5198 18.7368 23.5492 18.6517C23.5639 18.6107 23.578 18.5703 23.5915 18.528L23.5952 18.5176C23.6087 18.4772 23.6215 18.4367 23.6338 18.3969C23.6472 18.3541 23.6607 18.3106 23.673 18.2683C23.6852 18.2273 23.6968 18.1869 23.7085 18.144L23.7452 18.008C23.7673 17.9211 23.7881 17.8347 23.8095 17.741C23.8193 17.6975 23.8285 17.654 23.8359 17.6142C23.8432 17.583 23.8493 17.5512 23.8536 17.5242C23.861 17.4911 23.8671 17.4581 23.872 17.4268C23.8775 17.3974 23.8824 17.368 23.8885 17.3331C23.8953 17.2933 23.9026 17.2523 23.9087 17.2051C23.9149 17.1647 23.921 17.1249 23.9271 17.0777L23.9308 17.0508C23.9357 17.0122 23.9406 16.9742 23.9443 16.9381C23.9498 16.8922 23.9553 16.8456 23.9596 16.8003C23.9639 16.7587 23.9675 16.7164 23.9712 16.6699C23.9724 16.6552 23.9743 16.6405 23.9743 16.63C23.9767 16.6031 23.9792 16.5749 23.9798 16.551C23.9822 16.5223 23.9841 16.4929 23.9853 16.4641L23.9951 16.2436C23.9963 16.1989 23.9976 16.1542 23.9982 16.1033C23.9994 16.0691 23.9994 16.0341 23.9994 15.9998C23.9994 15.9656 23.9994 15.9306 23.9982 15.8982L23.9988 15.8988ZM23.7403 16.6117L23.7367 16.6576C23.7336 16.6974 23.7299 16.7366 23.7256 16.777C23.7213 16.8211 23.7171 16.8652 23.7109 16.9112C23.7066 16.9504 23.7017 16.9889 23.6975 17.0238C23.6956 17.0343 23.6944 17.0453 23.6932 17.0532C23.6883 17.0918 23.6828 17.1298 23.6766 17.1672C23.6754 17.1733 23.6748 17.1788 23.6748 17.1812C23.6693 17.2192 23.6632 17.2566 23.6558 17.2982C23.6509 17.3264 23.646 17.3552 23.6405 17.3852C23.6356 17.4152 23.6301 17.4446 23.6227 17.4783C23.6178 17.5064 23.6123 17.534 23.6056 17.5652C23.5982 17.6063 23.5891 17.6473 23.5805 17.6859C23.5786 17.6914 23.578 17.6969 23.5768 17.7006C23.559 17.7808 23.5388 17.8641 23.5174 17.9474L23.4807 18.0821C23.4702 18.1213 23.4586 18.1605 23.447 18.1997C23.4347 18.2414 23.4225 18.283 23.4084 18.3253C23.398 18.3596 23.3869 18.3933 23.3759 18.4269L23.3722 18.4392C23.3698 18.4459 23.3673 18.4521 23.3667 18.4551C23.3545 18.4937 23.341 18.5317 23.3263 18.5715C23.2975 18.6548 23.2657 18.7411 23.2308 18.8293C23.2179 18.8636 23.2044 18.8973 23.1855 18.9426C23.1708 18.9794 23.1561 19.0155 23.1389 19.0535C23.1224 19.0927 23.1052 19.1319 23.0875 19.1717C23.0703 19.2109 23.0526 19.2495 23.0348 19.2874L23.0244 19.3089C23.0066 19.3462 22.9889 19.3836 22.9705 19.4216C22.9307 19.5024 22.8994 19.5642 22.8707 19.6181C22.867 19.6243 22.8639 19.6298 22.8627 19.6328C22.8302 19.6941 22.7947 19.759 22.7506 19.8374C22.7022 19.9219 22.6563 19.9997 22.6085 20.0762C21.2024 22.3515 18.7685 23.7295 16.0977 23.7625C16.0658 23.7638 16.0346 23.7638 16.0028 23.7638H15.985C15.9568 23.7638 15.9299 23.7638 15.9005 23.7625C13.2596 23.7301 10.8405 22.3741 9.42821 20.1363C8.66572 18.9285 8.25355 17.5322 8.23579 16.0972C8.23456 16.0642 8.23456 16.0317 8.23456 15.9992C8.23456 15.9668 8.23456 15.9343 8.23579 15.9C8.25294 14.5043 8.64551 13.1398 9.37064 11.9547C10.7744 9.66048 13.2155 8.27024 15.9023 8.23717C15.9335 8.23656 15.9654 8.23594 15.9997 8.23594C16.034 8.23594 16.0652 8.23594 16.0995 8.23717C18.7777 8.27085 21.2158 9.65619 22.6208 11.9424C22.7537 12.1586 22.8774 12.384 22.9882 12.6131C23.0066 12.6504 23.025 12.6884 23.0428 12.7276L23.0783 12.8047C23.0856 12.8201 23.0924 12.8354 23.0991 12.8507L23.1058 12.866C23.1162 12.8893 23.1267 12.9119 23.1365 12.9352L23.1861 13.054C23.2063 13.1018 23.2259 13.1502 23.2461 13.2047C23.2577 13.2353 23.27 13.2659 23.2816 13.2996C23.292 13.3272 23.3024 13.3541 23.3122 13.3829C23.3208 13.4068 23.3294 13.4313 23.338 13.4558L23.3453 13.4772C23.3557 13.506 23.3649 13.5348 23.3747 13.5648C23.3863 13.5991 23.3974 13.634 23.4084 13.6683L23.477 13.8973L23.4941 13.961C23.5015 13.9874 23.5082 14.0137 23.5162 14.0443C23.5192 14.0547 23.5217 14.0651 23.5254 14.0792C23.5315 14.1019 23.537 14.1239 23.5425 14.1491C23.548 14.1711 23.5529 14.1931 23.5584 14.2158L23.5615 14.2299C23.5695 14.2648 23.578 14.3003 23.586 14.3377C23.594 14.372 23.6013 14.4069 23.608 14.4418L23.6105 14.4522C23.6166 14.4822 23.6227 14.5122 23.6282 14.5422L23.6607 14.726C23.6668 14.7621 23.6723 14.7982 23.6779 14.8344C23.6828 14.8668 23.6877 14.8999 23.6919 14.933L23.6975 14.9752C23.6999 14.9942 23.7024 15.0126 23.7048 15.0316L23.7066 15.0481C23.7103 15.0732 23.7128 15.0989 23.7158 15.1259C23.7201 15.1608 23.7238 15.1951 23.7269 15.2306C23.7354 15.3145 23.7422 15.4021 23.7483 15.4976C23.7507 15.5417 23.7538 15.5871 23.7556 15.6318L23.7569 15.655C23.7587 15.6924 23.7599 15.7298 23.7611 15.7677C23.7624 15.8106 23.7636 15.8535 23.7642 15.9049C23.7654 15.9374 23.7654 15.9698 23.7654 16.0017C23.7654 16.0335 23.7654 16.0672 23.7642 16.0997V16.1082C23.7642 16.1517 23.7624 16.1946 23.7611 16.2369L23.7513 16.4531C23.7501 16.4794 23.7489 16.5057 23.7458 16.5351C23.7446 16.5596 23.7428 16.5847 23.7403 16.6123V16.6117Z'
								fill='#192A4D'
							/>
							<path
								d='M23.2091 15.9123L23.2489 15.9062C23.2489 15.8652 23.2477 15.8248 23.2465 15.7843C23.2452 15.7421 23.2434 15.7004 23.2416 15.6588C23.2397 15.6165 23.2373 15.5743 23.2342 15.5326C23.2287 15.4463 23.222 15.3617 23.214 15.2834C23.2109 15.2503 23.2073 15.2172 23.2036 15.1854C23.2011 15.1627 23.1981 15.14 23.195 15.1113L23.1828 15.0133C23.1779 14.9796 23.173 14.9459 23.1681 14.9122C23.1632 14.8785 23.1577 14.8448 23.1521 14.8118L23.1246 14.6532C23.1178 14.6189 23.1117 14.5852 23.1025 14.5417C23.0964 14.5098 23.0897 14.478 23.0829 14.4486C23.0756 14.4149 23.0676 14.3812 23.0597 14.3475C23.0542 14.3218 23.048 14.2961 23.0419 14.2722C23.0364 14.2496 23.0309 14.2275 23.026 14.2091C23.0229 14.1957 23.0192 14.1828 23.0168 14.1742C23.0101 14.1473 23.0033 14.1216 22.9966 14.0964C22.9911 14.0756 22.9856 14.0548 22.9794 14.0328L22.9176 13.8251C22.9072 13.7921 22.8968 13.759 22.8863 13.7278C22.8778 13.6996 22.868 13.6714 22.8582 13.6451C22.8484 13.6157 22.838 13.5857 22.8282 13.5581C22.8184 13.5312 22.8086 13.5048 22.7994 13.4803C22.789 13.4509 22.7773 13.4215 22.7645 13.3872C22.7467 13.3407 22.7283 13.2948 22.7094 13.2501L22.6591 13.1294C22.6506 13.1104 22.6426 13.0908 22.6334 13.0706C22.6254 13.0522 22.6175 13.0332 22.6089 13.0155L22.5771 12.9463C22.5605 12.9095 22.5428 12.8728 22.5256 12.8379C22.4362 12.6535 22.3382 12.4716 22.2347 12.2977C22.2053 12.2481 22.1582 12.2132 22.1018 12.1991C22.0449 12.185 21.9867 12.1948 21.9371 12.2254L19.431 13.7829L18.1448 14.6054C17.1662 13.9262 16.626 12.9291 16.215 9.20244C16.2028 9.09342 16.1103 9.01074 15.9995 9.01074C15.8886 9.01074 15.7986 9.09281 15.7863 9.20244C15.4599 12.1666 15.0875 13.7363 13.8645 14.5993L13.2435 14.2367L11.0252 12.8869L10.0618 12.245C10.0129 12.2126 9.95161 12.2016 9.89465 12.2144C9.83769 12.2273 9.78809 12.2634 9.75808 12.3136C9.11501 13.3989 8.76715 14.6421 8.75122 15.9074C8.75 15.9387 8.75 15.9705 8.75 16.0017C8.75 16.033 8.75 16.0654 8.75122 16.0948C8.76715 17.3987 9.134 18.6738 9.81258 19.7811C9.84259 19.8301 9.88975 19.8644 9.9461 19.8773C10.0031 19.8901 10.06 19.8809 10.109 19.8509L12.6157 18.2935L13.9343 17.4496C15.1041 18.3211 15.4648 19.8724 15.7863 22.7949C15.7986 22.9039 15.8911 22.9866 16.0019 22.9866C16.1128 22.9866 16.2028 22.9046 16.215 22.7949C16.5329 19.9054 16.885 18.3682 18.0168 17.4875L19.4077 18.2629L21.9273 19.7964C21.9763 19.8264 22.0357 19.835 22.0908 19.8215C22.1465 19.8074 22.1937 19.7732 22.2231 19.7242C22.2506 19.6782 22.2776 19.6323 22.3039 19.5857C22.3456 19.5129 22.3792 19.4516 22.4142 19.3849C22.4472 19.323 22.4785 19.2605 22.5097 19.1981C22.5256 19.1668 22.5409 19.1344 22.5556 19.1025L22.5697 19.0725C22.5869 19.0358 22.6034 18.9996 22.6193 18.9641C22.6359 18.9274 22.6518 18.8906 22.6677 18.8533C22.6824 18.819 22.6971 18.7841 22.7106 18.751L22.7155 18.74C22.7277 18.7106 22.7387 18.6812 22.7528 18.6463C22.7847 18.5648 22.8153 18.4821 22.8435 18.4013C22.8557 18.3658 22.8686 18.3296 22.8839 18.2849C22.8961 18.2476 22.9078 18.2108 22.9194 18.1735C22.9317 18.1349 22.9439 18.0951 22.9549 18.0565C22.966 18.0191 22.977 17.9824 22.9868 17.945L23.0205 17.8207C23.0407 17.7423 23.0591 17.6639 23.0787 17.5776L23.1056 17.4477C23.1105 17.4244 23.1154 17.4018 23.1185 17.3822C23.1246 17.3522 23.1307 17.3222 23.135 17.294L23.1681 17.0925C23.1736 17.0564 23.1791 17.0202 23.1846 16.9761L23.1871 16.9602C23.192 16.9229 23.1969 16.8861 23.2005 16.85L23.2018 16.8383C23.206 16.8004 23.2103 16.763 23.214 16.7263C23.2177 16.6889 23.2207 16.6522 23.2244 16.6075C23.2256 16.594 23.2269 16.5811 23.2275 16.5713C23.2299 16.5468 23.2318 16.5217 23.2324 16.4997C23.2348 16.4746 23.236 16.4488 23.2373 16.4207L23.2458 16.221C23.2471 16.1806 23.2483 16.1402 23.2483 16.0948C23.2495 16.063 23.2495 16.0318 23.2495 15.9999C23.2495 15.9681 23.2495 15.9368 23.2483 15.9074L23.2085 15.9087L23.2091 15.9123ZM22.887 17.5377L22.8453 17.5402C22.8288 17.6131 22.811 17.6884 22.792 17.7631L22.7639 17.8697C22.762 17.8758 22.7602 17.8819 22.759 17.885C22.7492 17.9205 22.7394 17.9554 22.7283 17.9916C22.7173 18.0289 22.7063 18.0663 22.694 18.1036C22.683 18.1392 22.672 18.1741 22.661 18.2071C22.6585 18.2133 22.6567 18.2182 22.6561 18.2206C22.645 18.2543 22.6334 18.2874 22.6205 18.3247C22.593 18.4031 22.5636 18.4827 22.533 18.5617L22.5281 18.574C22.5177 18.6003 22.5079 18.6261 22.4981 18.6499L22.4932 18.661C22.4791 18.6946 22.465 18.7283 22.4509 18.762C22.4356 18.7969 22.4203 18.8324 22.4037 18.8692C22.3884 18.9047 22.3725 18.9396 22.356 18.9739L22.3468 18.9935C22.3309 19.0272 22.3149 19.0609 22.2978 19.0946C22.2678 19.1558 22.2378 19.2158 22.2078 19.2722C22.2047 19.2777 22.2016 19.2826 22.2004 19.2863C22.1716 19.3414 22.1392 19.4002 22.0987 19.4706C22.0767 19.5092 22.0547 19.5478 22.0314 19.5864L19.5253 18.0614L18.2281 17.3381C19.1786 16.7152 20.6295 16.4531 22.7963 16.2149C22.9053 16.2026 22.988 16.1101 22.988 15.9993C22.988 15.8884 22.9059 15.7984 22.7963 15.7862C20.7177 15.5577 19.3177 15.3128 18.3622 14.7469L19.5553 13.9838L22.0424 12.4386C22.1392 12.6021 22.2304 12.7717 22.3131 12.9432C22.3296 12.9769 22.3462 13.0112 22.3621 13.0467L22.3946 13.1165C22.4001 13.1282 22.4056 13.1398 22.4105 13.1521L22.4191 13.1723C22.427 13.19 22.435 13.2078 22.4423 13.2256L22.4913 13.3419C22.5091 13.3854 22.5268 13.4289 22.5452 13.4779C22.5562 13.5054 22.5667 13.533 22.5777 13.5636C22.5875 13.5881 22.596 13.6126 22.6052 13.6383C22.6156 13.6659 22.6248 13.6941 22.6352 13.7235C22.6444 13.7492 22.653 13.7749 22.6616 13.8025C22.672 13.8337 22.6824 13.8649 22.6916 13.8956L22.7522 14.0995C22.7577 14.1185 22.7632 14.1381 22.7681 14.1577L22.7718 14.1706C22.7773 14.1908 22.7828 14.2116 22.7896 14.2373C22.792 14.2459 22.7945 14.2545 22.7975 14.2667C22.8031 14.2869 22.808 14.3071 22.8129 14.3298C22.819 14.3537 22.8245 14.3769 22.83 14.4027C22.8374 14.4345 22.8453 14.4664 22.852 14.5C22.8594 14.5313 22.8655 14.5625 22.8741 14.6029C22.8808 14.6348 22.887 14.6666 22.8925 14.6972L22.9194 14.851C22.9237 14.8773 22.928 14.9036 22.9323 14.9306L22.9353 14.949C22.9402 14.9802 22.9445 15.0114 22.9494 15.0476L22.9531 15.0751C22.9556 15.0923 22.9574 15.1094 22.9598 15.1278L22.9611 15.14C22.9641 15.1633 22.9672 15.1872 22.9696 15.2123C22.9733 15.2435 22.9764 15.2748 22.98 15.3066C22.9874 15.3832 22.9941 15.464 22.9996 15.5479C23.0021 15.5877 23.0045 15.6282 23.0064 15.6692C23.0082 15.7096 23.0101 15.7506 23.0113 15.7923C23.0125 15.8309 23.0137 15.8695 23.0137 15.916C23.0143 15.9448 23.0143 15.9748 23.0143 16.0036C23.0143 16.0324 23.0143 16.0624 23.0131 16.0942V16.1003C23.0131 16.1395 23.0119 16.1781 23.0107 16.2161L23.0021 16.4121C23.0009 16.4354 22.9996 16.4592 22.9972 16.4862C22.996 16.5088 22.9941 16.5309 22.9923 16.5566L22.9892 16.5983C22.9862 16.6338 22.9831 16.6687 22.9794 16.7054C22.9764 16.7397 22.9721 16.774 22.9678 16.8145L22.9666 16.8267C22.9635 16.8555 22.9598 16.8849 22.9562 16.9124L22.9543 16.929C22.9531 16.9369 22.9519 16.9449 22.9507 16.9559C22.9458 16.9908 22.9409 17.0251 22.936 17.0582L22.9329 17.0784C22.928 17.1103 22.9231 17.1415 22.9176 17.1727L22.9145 17.1887C22.9108 17.2107 22.9072 17.2328 22.9023 17.2566C22.898 17.2836 22.8931 17.3105 22.887 17.3412C22.8833 17.3608 22.8796 17.3803 22.8747 17.4018L22.871 17.4183C22.8637 17.4545 22.8557 17.4912 22.8471 17.5304L22.8863 17.539L22.887 17.5377ZM8.98579 16.0918C8.98518 16.0624 8.98518 16.033 8.98518 16.003C8.98518 15.973 8.98518 15.9442 8.98579 15.9136C9.0011 14.6948 9.33366 13.4993 9.94855 12.4539L10.8978 13.0865L13.045 14.3935L13.0438 14.3947L13.2759 14.5343L13.3115 14.5521L13.6422 14.7444C12.6874 15.3115 11.2849 15.5571 9.20259 15.7862C9.09358 15.7984 9.0109 15.8909 9.0109 16.0017C9.0109 16.1126 9.09297 16.2026 9.20259 16.2149C11.3363 16.4494 12.7676 16.7054 13.7218 17.3062L12.4883 18.0957L10.0006 19.6415C9.35203 18.5746 9.00049 17.3473 8.98518 16.0918H8.98579Z'
								fill='#192A4D'
							/>
						</g>
						<defs>
							<clipPath id='clip0_404_1903'>
								<rect
									width='15.9994'
									height='16'
									fill='white'
									transform='translate(8 8)'
								/>
							</clipPath>
						</defs>
					</Scale>

					<Words
						as='h2'
						className='text-56 text-blue font-medium font-outfit 
        tracking-tight leading-[1.3] max-w-[max(35rem,480px)]
        mt-[max(0.875rem,12px)]
        '>
						{igFeedSection.title}
					</Words>
					<Paragraph
						className='text-[#0B192DCC] text-20 mt-[max(0.75rem,12px)] 
          max-w-[max(41.625rem,500px)] leading-[1.3]'>
						{igFeedSection.info}
					</Paragraph>
					<Link
						href={
							'https://www.instagram.com/abhinavjindal97?igsh=MTdjcGdyZ3JleDY1Zg=='
						}
						target='_blank'
						rel='noopener'>
						<Button bg='blue' className='mt-[max(1.25rem,18px)]'>
							Connect with Abhinav
						</Button>
					</Link>
				</div>
			</div>

			<div className='mt-[max(2.825rem,36px)]'>
				<ul
					className='flex items-center gap-[max(1.5rem,16px)] 
        overflow-x-auto hide-scroll'>
					{igFeedSection.feed.map((item, i) => (
						<FeedItem
							posterSrc={item.poster.url as string}
							videoSrc={item.video_url}
							igVidSrc={item.ig_video_url || ''}
							key={item.poster.url}
							className={
								i === 0
									? 'ml-gutter'
									: i === igFeedSection.feed.length - 1
										? 'mr-gutter'
										: ''
							}
						/>
					))}
				</ul>
			</div>
		</section>
	);
}

function useIsMobile() {
	const [isMobile, setIsMobile] = useState(false);

	useEffect(() => {
		const mq = window.matchMedia('(max-width: 1024px)');
		setIsMobile(mq.matches);

		const handler = () => setIsMobile(mq.matches);
		mq.addEventListener('change', handler);

		return () => mq.removeEventListener('change', handler);
	}, []);

	return isMobile;
}

const FeedItem = ({
	videoSrc,
	posterSrc,
	className,
	igVidSrc,
}: {
	videoSrc: KeyTextField;
	posterSrc: KeyTextField;
	className?: string;
	igVidSrc?: KeyTextField;
}) => {
	const isMobile = useIsMobile();
	const [showVideo, setShowVideo] = useState(false);

	if (isMobile) {
		return (
			<li className={`${className} relative`}>
				<Link
					href={
						igVidSrc ||
						'https://www.instagram.com/abhinavjindal97?igsh=MTdjcGdyZ3JleDY1Zg=='
					}
					target='_blank'
					rel='noopener'
					className=' absolute top-[max(1.75rem,20px)] 
        left-[max(1.375rem,16px)]'>
					<Button
						bg='blue'
						className={`
							text-base font-medium
				border border-solid border-[#EFEFEF] rounded-full py-[max(1.1rem,14px)] 
        px-[max(1.25rem,16px)] bg-blue text-lemon 
				transition-opacity duration-300 ease-in-out z-2
				[&_span]:flex [&_span]:items-center [&_span]:justify-center 
				[&_span]:gap-[max(0.375rem,6px)] hover:text-lemon!
        
        `}>
						<svg
							width='24'
							height='24'
							viewBox='0 0 24 24'
							fill='none'
							xmlns='http://www.w3.org/2000/svg'>
							<path
								d='M19.2664 13.5161C19.4979 13.337 19.6853 13.1072 19.8142 12.8444C19.9431 12.5816 20.0101 12.2928 20.0101 12.0001C20.0101 11.7074 19.9431 11.4186 19.8142 11.1558C19.6853 10.893 19.4979 10.6633 19.2664 10.4841C16.2686 8.16528 12.9216 6.33718 9.35042 5.06811L8.69742 4.83611C7.44942 4.39311 6.13042 5.23711 5.96142 6.52611C5.48942 10.1602 5.48942 13.84 5.96142 17.4741C6.13142 18.7631 7.44942 19.6071 8.69742 19.1641L9.35042 18.9321C12.9216 17.663 16.2686 15.8349 19.2664 13.5161Z'
								fill='#C8D72C'
							/>
						</svg>
						Watch
					</Button>
				</Link>
				<figure>
					<Image
						src={posterSrc as string}
						width={361}
						height={569}
						alt='From instagram feed'
						className='min-w-[max(22.575rem,240px)] h-[max(35.563rem,420px)] 
            object-cover rounded-[max(12px,0.75rem)]'
					/>
				</figure>
			</li>
		);
	}

	return (
		<li
			className={`${className} relative`}
			onMouseEnter={() => setShowVideo(true)}
			onMouseLeave={() => setShowVideo(false)}>
			<Link
				href={'https://www.instagram.com/abhinavjindal97?igsh=MTdjcGdyZ3JleDY1Zg=='}
				target='_blank'
				rel='noopener'
				className=' absolute top-[max(1.75rem,20px)] 
        left-[max(1.375rem,16px)] z-3'>
				<Button
					bg='blue'
					className={`
							text-base font-medium
				border border-solid border-[#EFEFEF] rounded-full py-[max(1.1rem,14px)] 
        px-[max(1.25rem,16px)] bg-blue text-lemon 
				transition-opacity duration-300 ease-in-out z-2
				[&_span]:flex [&_span]:items-center [&_span]:justify-center 
				[&_span]:gap-[max(0.375rem,6px)] hover:text-lemon!
        ${showVideo ? 'opacity-100' : 'opacity-0'}
        `}>
					<svg
						width='24'
						height='24'
						viewBox='0 0 24 24'
						fill='none'
						xmlns='http://www.w3.org/2000/svg'>
						<path
							d='M19.2664 13.5161C19.4979 13.337 19.6853 13.1072 19.8142 12.8444C19.9431 12.5816 20.0101 12.2928 20.0101 12.0001C20.0101 11.7074 19.9431 11.4186 19.8142 11.1558C19.6853 10.893 19.4979 10.6633 19.2664 10.4841C16.2686 8.16528 12.9216 6.33718 9.35042 5.06811L8.69742 4.83611C7.44942 4.39311 6.13042 5.23711 5.96142 6.52611C5.48942 10.1602 5.48942 13.84 5.96142 17.4741C6.13142 18.7631 7.44942 19.6071 8.69742 19.1641L9.35042 18.9321C12.9216 17.663 16.2686 15.8349 19.2664 13.5161Z'
							fill='#C8D72C'
						/>
					</svg>
					Watch
				</Button>
			</Link>
			{showVideo && (
				<video
					className='min-w-[max(22.575rem,240px)] 
          object-cover rounded-[max(12px,0.75rem)]
           absolute top-0 left-0 w-full h-full z-2
          '
					autoPlay
					loop
					muted
					playsInline
					preload='none'>
					<source src={videoSrc as string} type='video/mp4' />
				</video>
			)}
			<Image
				src={posterSrc as string}
				width={361}
				height={569}
				alt='From Instagram feed'
				className={`min-w-[max(22.575rem,240px)]
                     h-[max(35.563rem,420px)]
                     object-cover rounded-[max(12px,0.75rem)]
										 transition-opacity duration-300 ease-in-out
										 
										 `}
				fetchPriority='low'
			/>
		</li>
	);
};
